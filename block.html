<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
<!-- Layout for 4 chart -->
<div style='height:54px;'></div>
<div class="row">
  <div style='width:54px;'></div>
  <div class="card-deck">

    <!-- 1st floor -->
    <div class="card card-inverse text-white mb-3 text-center" style="background-color: #333333; border-color: #333333;">
      <div class="card-header">
      	<h4>1st Floor</h4>
      </div>
      <div class="card-body" id="area1">
        <div style='height:20px;'></div>
        <input id="toggle1" type="checkbox"  data-toggle="toggle" data-onstyle="success" data-offstyle="danger">
        <div style='height:20px;'></div>
      </div>
    </div>

    <!-- 2nd floor -->
    <div class="card card-inverse text-white mb-3 text-center" style="background-color: #333333; border-color: #333333;">
      <div class="card-header">
      	<h4>2nd Floor</h4>
      </div>
      <div class="card-body" id="area2">
        <div style='height:20px;'></div>
        <input id="toggle2" type="checkbox"  data-toggle="toggle" data-onstyle="success" data-offstyle="danger">
        <div style='height:20px;'></div>
      </div>
    </div>

    <!-- 3rd floor -->
    <div class="card card-inverse text-white mb-3 text-center" style="background-color: #333333; border-color: #333333;">
      <div class="card-header">
      	<h4>3rd Floor</h4>
      </div>
      <div class="card-body" id="area3">
        <div style='height:20px;'></div>
        <input id="toggle3" type="checkbox"  data-toggle="toggle" data-onstyle="success" data-offstyle="danger">
        <div style='height:20px;'></div>
      </div>
    </div>
   
    <!-- 4th floor -->
    <div class="card card-inverse text-white mb-3 text-center" style="background-color: #333333; border-color: #333333;">
      <div class="card-header">
      	<h4>4th Floor</h4>
      </div>
      <div class="card-body" id="area4">
        <div style='height:20px;'></div>
        <input id="toggle4" type="checkbox"  data-toggle="toggle" data-onstyle="success" data-offstyle="danger">
        <div style='height:20px;'></div>
      </div>
    </div>

  </div>
</div>

<script>
var maxToggle = 4;

for(var i=1 ; i<=maxToggle ; i++)
{
	$('#toggle'+ i.toString()).bootstrapToggle(
	{
	  on: 'Clear',
	  off: 'Blocked',
	  onstyle: "success",
	  offstyle: "danger"
	});
}


function toggleOn(index)
{
	$('#toggle'+ index.toString()).prop('checked', true).change();
}
function toggleOff(index)
{
	$('#toggle'+ index.toString()).prop('checked', false).change();
}

</script>

<script>
var urls = ["https://api.mediatek.com/mcs/v2/devices/D50Vc0GM/datachannels/Test_only/datapoints",
            "https://api.mediatek.com/mcs/v2/devices/D50Vc0GM/datachannels/Test_only/datapoints",
            "https://api.mediatek.com/mcs/v2/devices/D50Vc0GM/datachannels/Test_only/datapoints",
           "https://api.mediatek.com/mcs/v2/devices/D50Vc0GM/datachannels/Test_only/datapoints"];
var devKey = ["jur0mgrSH4gJ8KJr",
              "jur0mgrSH4gJ8KJr",
              "jur0mgrSH4gJ8KJr",
              "jur0mgrSH4gJ8KJr"];

/* AJAX set up */
var cnt = [0,0,0,0];
var inc = [1,2,1,2];
var xhrArr = [];
var CallBack = function(index){
  return function(){
    if(xhrArr[index].readyState == 4 && xhrArr[index].status == 200) 
      {
          /* Parse data once received */
          var dataPoint = JSON.parse(xhrArr[index].response).dataChannels[0].dataPoints[0].values.value
          console.log(dataPoint);

      }
  }
}

/* Request data for every minute, and record interval id for clearing in index.html*/
RequestMCSData();
intervalArr.push(setInterval(RequestMCSData, 10000));

function RequestMCSData()
{
    for(var i=0; i<maxChart; i++) 
    {
      xhrArr[i]=new XMLHttpRequest();
      xhrArr[i].open("GET", urls[i], true);
      xhrArr[i].setRequestHeader("deviceKey", devKey[i]);
      xhrArr[i].setRequestHeader("Content-Type", "application/json");
      xhrArr[i].onreadystatechange=CallBack(i);
      xhrArr[i].send();
    }
} 

</script>



